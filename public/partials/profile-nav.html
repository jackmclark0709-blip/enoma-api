<style>

.profile-nav {
  position: sticky;
  top: 0;
  z-index: 50;
  background: white;
  border-bottom: 1px solid #eee;
}

.profile-nav-inner {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0.75rem 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;

}

.profile-cta {
  padding: 0.5rem 1rem;
  border-radius: 999px;
  background: #211551;
  color: white;
  font-weight: 500;
  text-decoration: none;
}

.profile-brand img {
  height: 40px;
  width: auto;
  max-width: 160px;
  display: block;
}

.profile-brand {
  display: flex;
  align-items: center;
}


</style>

<nav class="profile-nav">
  <div class="profile-nav-inner">

 <div class="profile-brand">
      <img id="businessLogo" alt="" />
    </div>


    <a href="/" class="profile-cta" id="profileCTA">
      Contact
    </a>

     </div>
</nav>

<script>
  function initProfileNav(profile) {
    const logo = document.getElementById("businessLogo");
    const cta = document.getElementById("profileCTA");

    if (!profile) return;

    // Logo
    if (profile.logo_url && logo) {
      logo.src = profile.logo_url;
      logo.alt = profile.business_name || "";
      logo.style.display = "block";
    } else {
      logo.style.display = "none";
    }

    // CTA
    if (profile.primary_cta_type && profile.primary_cta_value) {
      if (profile.primary_cta_type === "call") {
        cta.href = `tel:${profile.primary_cta_value}`;
        cta.textContent = "Call";
      } else if (profile.primary_cta_type === "email") {
        cta.href = `mailto:${profile.primary_cta_value}`;
        cta.textContent = "Email";
      } else if (profile.primary_cta_type === "link") {
        cta.href = profile.primary_cta_value;
        cta.textContent = profile.primary_cta_label || "Contact";
      } else {
        cta.href = "#contact";
        cta.textContent = "Contact";
      }
    } else {
      cta.href = "#contact";
      cta.textContent = "Contact";
    }
  }

  /* ✅ If profile data already exists */
  if (window.profileData) {
    initProfileNav(window.profileData);
  }

  /* ✅ Otherwise wait for it */
  window.addEventListener("profileDataReady", e => {
    initProfileNav(e.detail);
  });
</script>



